<script>
  const menuDataUrl = 'https://raw.githubusercontent.com/surubro/surubro.github.io/refs/heads/master/love.json'; // Replace with your actual raw GitHub JSON URL
  let menuData = [];

  const searchInput = document.getElementById('search');
  const resultsDiv = document.getElementById('results');
  const detailsDiv = document.getElementById('details');

  // Disable input until data is loaded
  searchInput.disabled = true;

  // Fetch data from GitHub raw JSON file
  fetch(menuDataUrl)
    .then(response => response.json())
    .then(data => {
      menuData = data;
      searchInput.disabled = false; // Enable input once data is loaded
    })
    .catch(error => {
      console.error('Error fetching data:', error);
      resultsDiv.innerHTML = 'Failed to load menu data.';
    });

  searchInput.addEventListener('input', () => {
    const query = searchInput.value.toLowerCase().trim();
    resultsDiv.innerHTML = '';
    detailsDiv.innerHTML = '';

    if (query && menuData.length > 0) {
      const matches = menuData.filter(item =>
        item.name.toLowerCase().includes(query)
      );

      matches.forEach(item => {
        const div = document.createElement('div');
        div.textContent = item.name;
        div.addEventListener('click', () => {
          const rSteps = item.sizes.R.steps.map(step => `<li>${step}</li>`).join('');
          const lSteps = item.sizes.L.steps.map(step => `<li>${step}</li>`).join('');
          detailsDiv.innerHTML = `
            <h3>${item.name}</h3>
            <h4>${item.sizes.R.label}</h4>
            <ul>${rSteps}</ul>
            <h4>${item.sizes.L.label}</h4>
            <ul>${lSteps}</ul>
          `;
        });
        resultsDiv.appendChild(div);
      });
    }
  });
</script>
